<!DOCTYPE html><head><meta charset="UTF-8"><title>Running your first model | Ferret</title><link href="../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/civet_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">Ferret</a><a href="https://github.com/mangerij/ferret" class="right"><img src="../media/framework/github-logo.png" class="github-mark"></img><img src="../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="cc215e83-ce39-49ea-8ef0-aab325581919" data-constrainWidth="false">Get Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="bf24a017-e232-45b2-bb79-b19382bdfa85" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="02ec00f8-8e97-461f-83d4-fddbc0ef8053" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="2a5802da-cdbf-4a90-a697-78a875f06be9" data-constrainWidth="false">EU Horizon2020-IF<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../publication_highlights/publication_highlights.html">Highlights</a></li><li><a href="#!" class="dropdown-trigger" data-target="d6af4fd9-1697-4842-b8ee-746f7e9a5506" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../contribute/index.html">Contact</a></li></ul><a href="#" class="sidenav-trigger" data-target="a06c75eb-ab48-42b7-916e-4367d13e627c"><i class="material-icons">menu</i></a><ul class="sidenav" id="a06c75eb-ab48-42b7-916e-4367d13e627c"><li><a href="#!" class="dropdown-trigger" data-target="744e40d3-4cf6-4e42-9a47-82ede74fb5f2" data-constrainWidth="false">Get Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="15e06036-7c50-4d27-b847-2abd1c351ab5" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="4394e1ce-d2a7-4f6f-a218-ba1d462794ed" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="702199cb-cfa7-4dcb-b261-3d277329fcb5" data-constrainWidth="false">EU Horizon2020-IF<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../publication_highlights/publication_highlights.html">Highlights</a></li><li><a href="#!" class="dropdown-trigger" data-target="4672db3a-2f98-4001-a546-4608e62abd5a" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../contribute/index.html">Contact</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="cc215e83-ce39-49ea-8ef0-aab325581919"><li><a href="install.html">Install FERRET</a></li><li><a href="update.html">Update FERRET</a></li><li><a href="running.html">Running FERRET</a></li><li><a href="paraview.html">Visualization Tools</a></li><li><a href="docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="bf24a017-e232-45b2-bb79-b19382bdfa85"><li><a href="../theory/intro_LGD.html">Phase Field Method of Ferroelectricity (FE)</a></li><li><a href="../theory/intro_LLG.html">Micromagnetic Simulations</a></li><li><a href="../theory/intro_piezo.html">Piezoelectricity</a></li><li><a href="../theory/intro_thermo.html">Thermoelectric Phenomena</a></li><li><a href="../theory/intro_optical.html">Optical Properties</a></li></ul><ul class="dropdown-content" id="02ec00f8-8e97-461f-83d4-fddbc0ef8053"><li><a href="../tutorials/FE_phase_field_multi_domain.html">Multidomain ferroelectric</a></li><li><a href="../tutorials/ferroelectric_domain_wall.html">Ferroelectric domain wall</a></li><li><a href="../tutorials/FE_phase_field_multi_domain_coupled.html">Ferroelectric thin film</a></li><li><a href="../tutorials/magnetic_ringdown.html">Magnetic ringdown</a></li><li><a href="../tutorials/AFM_dynamics.html">Antiferromagnetic dynamics</a></li><li><a href="../tutorials/piezoelectric.html">Piezoelectric actuation</a></li><li><a href="../tutorials/thermoelectric.html">Polycrystalline thermoelectric transport</a></li></ul><ul class="dropdown-content" id="2a5802da-cdbf-4a90-a697-78a875f06be9"><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_results1.html">Background and model</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_results2.html">Summary of key results</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex1.html">Example (ground states)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex2.html">Example (FE DWs)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex3.html">Example (magnetic DWs)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex4.html">Example (ME switching)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex5.html">Example (spin wave transport)</a></li></ul><ul class="dropdown-content" id="d6af4fd9-1697-4842-b8ee-746f7e9a5506"><li><a href="../syntax/index.html">Complete syntax</a></li><li><a href="../syntax/ferret_only_syntax.html">FERRET syntax</a></li></ul><ul class="dropdown-content" id="744e40d3-4cf6-4e42-9a47-82ede74fb5f2"><li><a href="install.html">Install FERRET</a></li><li><a href="update.html">Update FERRET</a></li><li><a href="running.html">Running FERRET</a></li><li><a href="paraview.html">Visualization Tools</a></li><li><a href="docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="15e06036-7c50-4d27-b847-2abd1c351ab5"><li><a href="../theory/intro_LGD.html">Phase Field Method of Ferroelectricity (FE)</a></li><li><a href="../theory/intro_LLG.html">Micromagnetic Simulations</a></li><li><a href="../theory/intro_piezo.html">Piezoelectricity</a></li><li><a href="../theory/intro_thermo.html">Thermoelectric Phenomena</a></li><li><a href="../theory/intro_optical.html">Optical Properties</a></li></ul><ul class="dropdown-content" id="4394e1ce-d2a7-4f6f-a218-ba1d462794ed"><li><a href="../tutorials/FE_phase_field_multi_domain.html">Multidomain ferroelectric</a></li><li><a href="../tutorials/ferroelectric_domain_wall.html">Ferroelectric domain wall</a></li><li><a href="../tutorials/FE_phase_field_multi_domain_coupled.html">Ferroelectric thin film</a></li><li><a href="../tutorials/magnetic_ringdown.html">Magnetic ringdown</a></li><li><a href="../tutorials/AFM_dynamics.html">Antiferromagnetic dynamics</a></li><li><a href="../tutorials/piezoelectric.html">Piezoelectric actuation</a></li><li><a href="../tutorials/thermoelectric.html">Polycrystalline thermoelectric transport</a></li></ul><ul class="dropdown-content" id="702199cb-cfa7-4dcb-b261-3d277329fcb5"><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_results1.html">Background and model</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_results2.html">Summary of key results</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex1.html">Example (ground states)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex2.html">Example (FE DWs)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex3.html">Example (magnetic DWs)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex4.html">Example (ME switching)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex5.html">Example (spin wave transport)</a></li></ul><ul class="dropdown-content" id="4672db3a-2f98-4001-a546-4608e62abd5a"><li><a href="../syntax/index.html">Complete syntax</a></li><li><a href="../syntax/ferret_only_syntax.html">FERRET syntax</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="gcse-search"></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="moose-content col s12 m12 l12"><section id="29409b2f-6eea-4dc4-8e88-48199785a3ce" data-section-level="1" data-section-text="Running your first model"><h1 id="running-your-first-model">Running your first model</h1><section id="a675c580-0937-4cee-916b-55ea63d1532e" data-section-level="2" data-section-text="Understanding the code organization"><h2 id="understanding-the-code-organization">Understanding the code organization</h2><p>Before running any model, it is important to understand what a &quot;model&quot; means in MOOSE. In the MOOSE ecosystem, the source code and the configuration of your model are separated.</p><p>The source codes of your model are written in <code>C++</code>, and they are compiled into an executable file. In FERRET the executable is called <code>ferret-opt</code>.</p><p>The configurations of your model are written in Hit format, and they are called &quot;input files&quot; with a <code>.i</code> extension. While your models may work for a wide variety of problems, an input file typically contains configurations for a <em>specific</em> problem. An input file may contain information about mesh, variables, weak form, constitutive models, boundary conditions, initial conditions, postprocessors, and so on.</p><div class="card moose-alert moose-alert-tip"><div class="card-title moose-alert-title"><i class="material-icons moose-inline-icon">school</i><span class="moose-alert-title-brand">tip:</span>No hard-coding!</div><div class="card-content"><div class="moose-alert-content"><p>We highly recommend you to follow this idea of separating the model from its parameters. As this allows for more general code, less code duplication, maximum modularity/reusability, and minimum maintenance cost. And even better, it is suggested you use the automatic differentation tools within MOOSE to eliminate the need for complicated algebra required to generate the residual and jacobian terms. However, this particular advice was rather lost as FERRET was developed. :)</p></div></div></div></section><section id="6aeafaca-e590-43b7-9a23-67470f152235" data-section-level="2" data-section-text="Command line interface"><h2 id="command-line-interface">Command line interface</h2><p>Before running a model, first make sure you have installed and compiled FERRET following <a href="install.html">the installation guide</a>.</p><p>To run a model, go to the directory of its input files, e.g.</p><pre class="moose-pre"><code class="language-bash">
cd ~/projects/ferret/tutorials/multidomain
</code></pre><p>and run the input file using the compiled executable:</p><pre class="moose-pre"><code class="language-bash">
../../ferret-opt -i multidomain.i
</code></pre><p>The first argument is the path to the FERRET executable. It is followed by a <code>-i</code> option meaning that we will supply our input file immediately after. <code>elasticity.i</code> is the path to the input file that we want to run.</p><p>To view the complete list of options, simply run the executable without any additional arguments:</p><pre class="moose-pre"><code class="language-bash">
../../ferret-opt
</code></pre><p>To run the model using multiple processors in parallel, use <code>mpiexec</code>, e.g.</p><pre class="moose-pre"><code class="language-bash">
mpiexec -n 2 ../../ferret-opt -i multidomain.i
</code></pre><p>where 2 is the number of processors you want to use.</p><p>After the calculation is finished, you can visualize the result following <a href="paraview.html">the visualization guide</a></p></section><section id="6daf8ef7-ca5e-4d11-8717-f38f9ed98769" data-section-level="2" data-section-text="Where to store your own models ?"><h2 id="where-to-store-your-own-models">Where to store your own models?</h2><p>Since the implementation and the configuration of a model are separated, we need to consider them separately:</p><ul class="browser-default"><li><p>The source code of the model, i.e. <code>.C</code> files, should be stored in <code>~/projects/ferret/src</code>. </p></li><li><p>The header file of the model, i.e. <code>.h</code> files, should be stored in <code>~/projects/ferret/include</code>. </p></li><li><p>The input files and all of their accompanying files shall be stored in a separate repository outside FERRET, unless you want to eventually merge into the official FERRET repository.</p></li></ul><p>For your convenience, there is a symlink in the FERRET repository to a directory sitting in parallel. The symlink is</p><pre class="moose-pre"><code class="language-bash">
~/projects/ferret/examples -&gt; ~/projects/ferret_examples
</code></pre><p>meaning that if you create a directory outside FERRET called <code>ferret_examples</code>, you will be able to access of its content from <code>~/projects/ferret/examples</code> as if they sit right there, but all content within that directory are not under version control (you can still set up one on your own, and it is actually highly recommended).</p><div class="card moose-alert moose-alert-tip"><div class="card-title moose-alert-title"><i class="material-icons moose-inline-icon">school</i><span class="moose-alert-title-brand">tip:</span>Output naming</div><div class="card-content"><div class="moose-alert-content"><p>Be careful with your output naming convention! If multiple simulations are run in the same folder to compare parameters but the names are not modified then they will be overwritten by the executable! This can cause some headache if calculations are heavy so always make sure you change the names of outputs if you want to compare results.</p></div></div></div></section></section></div></div></div></main></div></body><script type="text/javascript" src="../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../js/init.js"></script><script type="text/javascript" src="../js/navigation.js"></script><script type="text/javascript" src="https://cse.google.com/cse.js?cx=008852834041008754713:g3ilnhhbbj9"></script><script type="text/javascript" src="../js/sqa_moose.js"></script>