<!DOCTYPE html><head><meta charset="UTF-8"><title>Documenting MOOSE | Ferret</title><link href="../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/civet_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">Ferret</a><a href="https://github.com/mangerij/ferret" class="right"><img src="../media/framework/github-logo.png" class="github-mark"></img><img src="../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="4d4c96ad-ed66-47c4-83f7-f0530083dff1" data-constrainWidth="false">Get Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="1c18d220-a823-4926-896b-4997c33b656a" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="6d3aa185-9d10-43a5-9f1d-ee9fbb241596" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="4bb7ef20-003e-477a-aec2-02a04e158791" data-constrainWidth="false">EU Horizon2020-IF<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../publication_highlights/publication_highlights.html">Highlights</a></li><li><a href="#!" class="dropdown-trigger" data-target="3a73227b-a007-4ca4-8d08-7e8682718c53" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../contribute/index.html">Contact</a></li></ul><a href="#" class="sidenav-trigger" data-target="9a792590-7367-4d8d-a501-e18d5576cdd6"><i class="material-icons">menu</i></a><ul class="sidenav" id="9a792590-7367-4d8d-a501-e18d5576cdd6"><li><a href="#!" class="dropdown-trigger" data-target="9a11b268-d423-40ba-8e70-84c90e0e234b" data-constrainWidth="false">Get Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="d792a0fc-8ad6-4300-87b1-f8e070f11c69" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="8262fd5a-5e8f-4336-ac85-1510f937d0b1" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="d3e8def8-6284-4af7-9c5a-4513a9296b1e" data-constrainWidth="false">EU Horizon2020-IF<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../publication_highlights/publication_highlights.html">Highlights</a></li><li><a href="#!" class="dropdown-trigger" data-target="3ad6ec99-f882-4624-8721-7c7779eb5d30" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../contribute/index.html">Contact</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="4d4c96ad-ed66-47c4-83f7-f0530083dff1"><li><a href="../getting_started/install.html">Install FERRET</a></li><li><a href="../getting_started/update.html">Update FERRET</a></li><li><a href="../getting_started/running.html">Running FERRET</a></li><li><a href="../getting_started/paraview.html">Visualization Tools</a></li><li><a href="../getting_started/docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="1c18d220-a823-4926-896b-4997c33b656a"><li><a href="../theory/intro_LGD.html">Phase Field Method of Ferroelectricity (FE)</a></li><li><a href="../theory/intro_LLG.html">Micromagnetic Simulations</a></li><li><a href="../theory/intro_piezo.html">Piezoelectricity</a></li><li><a href="../theory/intro_thermo.html">Thermoelectric Phenomena</a></li><li><a href="../theory/intro_optical.html">Optical Properties</a></li></ul><ul class="dropdown-content" id="6d3aa185-9d10-43a5-9f1d-ee9fbb241596"><li><a href="../tutorials/FE_phase_field_multi_domain.html">Multidomain ferroelectric</a></li><li><a href="../tutorials/ferroelectric_domain_wall.html">Ferroelectric domain wall</a></li><li><a href="../tutorials/FE_phase_field_multi_domain_coupled.html">Ferroelectric thin film</a></li><li><a href="../tutorials/magnetic_ringdown.html">Magnetic ringdown</a></li><li><a href="../tutorials/AFM_dynamics.html">Antiferromagnetic dynamics</a></li><li><a href="../tutorials/piezoelectric.html">Piezoelectric actuation</a></li><li><a href="../tutorials/thermoelectric.html">Polycrystalline thermoelectric transport</a></li></ul><ul class="dropdown-content" id="4bb7ef20-003e-477a-aec2-02a04e158791"><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_results1.html">Background and model</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_results2.html">Summary of key results</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex1.html">Example (ground states)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex2.html">Example (FE DWs)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex3.html">Example (magnetic DWs)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex4.html">Example (ME switching)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex5.html">Example (spin wave transport)</a></li></ul><ul class="dropdown-content" id="3a73227b-a007-4ca4-8d08-7e8682718c53"><li><a href="../syntax/index.html">Complete syntax</a></li><li><a href="../syntax/ferret_only_syntax.html">FERRET syntax</a></li></ul><ul class="dropdown-content" id="9a11b268-d423-40ba-8e70-84c90e0e234b"><li><a href="../getting_started/install.html">Install FERRET</a></li><li><a href="../getting_started/update.html">Update FERRET</a></li><li><a href="../getting_started/running.html">Running FERRET</a></li><li><a href="../getting_started/paraview.html">Visualization Tools</a></li><li><a href="../getting_started/docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="d792a0fc-8ad6-4300-87b1-f8e070f11c69"><li><a href="../theory/intro_LGD.html">Phase Field Method of Ferroelectricity (FE)</a></li><li><a href="../theory/intro_LLG.html">Micromagnetic Simulations</a></li><li><a href="../theory/intro_piezo.html">Piezoelectricity</a></li><li><a href="../theory/intro_thermo.html">Thermoelectric Phenomena</a></li><li><a href="../theory/intro_optical.html">Optical Properties</a></li></ul><ul class="dropdown-content" id="8262fd5a-5e8f-4336-ac85-1510f937d0b1"><li><a href="../tutorials/FE_phase_field_multi_domain.html">Multidomain ferroelectric</a></li><li><a href="../tutorials/ferroelectric_domain_wall.html">Ferroelectric domain wall</a></li><li><a href="../tutorials/FE_phase_field_multi_domain_coupled.html">Ferroelectric thin film</a></li><li><a href="../tutorials/magnetic_ringdown.html">Magnetic ringdown</a></li><li><a href="../tutorials/AFM_dynamics.html">Antiferromagnetic dynamics</a></li><li><a href="../tutorials/piezoelectric.html">Piezoelectric actuation</a></li><li><a href="../tutorials/thermoelectric.html">Polycrystalline thermoelectric transport</a></li></ul><ul class="dropdown-content" id="d3e8def8-6284-4af7-9c5a-4513a9296b1e"><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_results1.html">Background and model</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_results2.html">Summary of key results</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex1.html">Example (ground states)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex2.html">Example (FE DWs)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex3.html">Example (magnetic DWs)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex4.html">Example (ME switching)</a></li><li><a href="../MSCA_EU_Horizon2020_Results/horizon2020_ex5.html">Example (spin wave transport)</a></li></ul><ul class="dropdown-content" id="3ad6ec99-f882-4624-8721-7c7779eb5d30"><li><a href="../syntax/index.html">Complete syntax</a></li><li><a href="../syntax/ferret_only_syntax.html">FERRET syntax</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="gcse-search"></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="moose-content col s12 m12 l12"><section id="21ed6227-10fb-410f-a96e-9c452ed22e4c" data-section-level="1" data-section-text="Documenting MOOSE"><h1 id="documenting-moose">Documenting MOOSE</h1><p>MOOSE and MOOSE-based applications generally focus on creating C++ objects (e.g., Kernels, BCs, etc.), so it is important that these objects are documented to allow other developers and users to understand the purpose of these objects. The MooseDocs System aims to make documenting objects straightforward and natural. Moreover, accessing the object documentation is simple and allows for documentation to remain up-to-date as the code continues to advance.</p><p>In order to ensure that MOOSE documentation continues to improve, requirements exist for documenting new and changing code within MOOSE:</p><ol class="browser-default" start="1"><li><p>Any new MooseObject must have descriptions for the class and all parameters. </p></li><li><p>Any new MooseObject must also include an associated markdown description page. </p></li><li><p>Developers who modify existing classes should update the existing markdown documentation file. </p></li><li><p>All new tests must contain a &#x27;requirement&#x27; and link to &#x27;design&#x27; and &#x27;issues&#x27;.</p></li></ol><section id="e01e4178-bb65-48c1-b7e3-a2eff9bb524c" data-section-level="2" data-section-text="MooseObject C ++ Documentation"><h2 id="mooseobject-c-documentation">MooseObject C++ Documentation</h2><p>The first step is to add documentation for your application in the <code>validParams</code> function. This is done by adding parameter documentation strings and calling the class description method.</p><p>A description of each parameter should also be provided when they are added with the various add methods of the <code>InputParameters</code> object. For example, in the <a href="../source/markers/BoxMarker.html">BoxMarker</a> the following parameter documentation is added, which is then present in the parameter summary table of the generated site.</p><pre class="moose-pre" style="max-height:350px;"><code class="language-cpp">  params.addRequiredParam&lt;RealVectorValue&gt;(
      &quot;bottom_left&quot;, &quot;The bottom left point (in x,y,z with spaces in-between).&quot;);
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#940904cd-e777-4ff2-9f2b-3721cd337f21">(../moose/framework/src/markers/BoxMarker.C)</a><p>The string supplied in this function will appear in the parameter tables within the documentation that is generated.  For example, see the parameter table for <a href="../source/markers/BoxMarker.html">BoxMarker</a>.</p><p>Secondly, a short description of the class should be supplied in the <code>addClassDescription</code> function. For example, the <a href="../source/kernels/Diffusion.html">Diffusion</a> object has the following class description:</p><pre class="moose-pre" style="max-height:350px;"><code class="language-cpp">  params.addClassDescription(&quot;The Laplacian operator ($-\\nabla \\cdot \\nabla u$), with the weak &quot;
                             &quot;form of $(\\nabla \\phi_i, \\nabla u_h)$.&quot;);
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#a827c9e7-f544-4299-97c0-53468ba6a734">(../moose/framework/src/kernels/Diffusion.C)</a><p>When the documentation for this object is generated, this string is added to the first portion of the page and the system overview table. For example, the <a href="../syntax/Kernels/index.html">Kernels overview</a> includes a table with each object listed; the table includes the class description from the source code.</p></section><section id="3469c1ce-3e94-4427-8983-633ba96b4d99" data-section-level="2" data-section-text="Markdown Documentation"><h2 id="markdown-documentation">Markdown Documentation</h2><p>Clear and consistent documentation is a necessary component of code development within MOOSE.  It is expected that developers submitting new MooseObjects (e.g., <code>Kernel</code> or <code>BoundaryCondition</code>) to the framework or modules will create a corresponding markdown file to document the new classes.</p><p>The documentation for the classes within MOOSE and the modules are located within the &quot;doc&quot; directory where the class is registered: &quot;framework/doc&quot; contains all core MOOSE level objects, &quot;modules/tensor_mechanics/doc&quot; contains objects for the tensor mechanics modules, etc.</p><p>When adding documentation, the MOOSE modules executable must exist; this is accomplished by using the following commands:</p><pre class="moose-pre"><code class="language-bash">
cd ~/projects/moose/modules
make -j16 # 16 should be replaced by the number of cores on your system
</code></pre><p>If you are writing a documentation page for a new class with MOOSE or the modules, you can use the MooseDocs executable to build a documentation stub for your new class. However, the executable for the module must be used. For example, if you add a new class to the tensor mechanics module:</p><pre class="moose-pre"><code class="language-bash">
cd ~/projects/moose/modules/tensor_mechanics
make -j16
cd doc
./moosedocs.py generate TensorMechanicsApp
</code></pre><p>To generate pages for the framework, the moose test application can be used as follows.</p><pre class="moose-pre"><code class="language-bash">
cd ~/projects/moose/test
make -j16
cd doc
./moosedocs.py generate MooseApp
</code></pre><p>This generate command needs to be run only when you add a new object (e.g., Kernel, BoundaryCondition, etc.) to your application.</p><p>After the stub files have been created, a local, live version of the website should be used to add content (see the <a href="documenting.html#live-website">Live Website</a> section below).</p></section><section id="11e5924b-84fb-4a8e-964f-9a2f8e9ea5e2" data-section-level="2" data-section-text="Live Website"><h2 id="live-website">Live Website</h2><p>A local website can be created and served; this is done by running the following commands.  When this command completes, which can take several minutes, a message will be printed and the site will be hosted at <a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a>:</p><pre class="moose-pre"><code class="language-bash">
cd ~/projects/moose/modules/doc
./moosedocs.py build --serve
</code></pre><p>Once the server is running, the markdown files within the repository may be modified. When changes are saved, the local server will automatically update the content. The content added or modified should follow the Standards for Documentation Pages guidelines.</p></section><section id="f21d99fc-1234-457e-bb6d-caf0144d7c6e" data-section-level="2" data-section-text="Media"><h2 id="media">Media</h2><p>In general, media files should be placed within the <code>content/media</code> directory within the framework or module directories. However, if a large file (&gt;2MB), such as a movie, is needed then the &quot;large media&quot; repository should be used. Within MOOSE there is a folder, <code>large_media</code>, which is a submodule. The large file should be added to this repository and the submodule should be updated in MOOSE to reflect this change.</p></section><section id="36bce0d5-4445-470f-b3b2-d6fc722afb0c" data-section-level="2" data-section-text="Requirement , Design , and Issues"><h2 id="requirement-design-and-issues">Requirement, Design, and Issues</h2><p>MOOSE follows strict software quality standards. To meet these standards, every test within MOOSE must provide three items with each test of the test specification.</p><ol class="browser-default" start="1"><li><p><strong>requirement</strong>: A description of the &quot;requirement&quot; that the test is testing. The text for the requirement must be listed in the test specification file (&quot;tests&quot; file).</p><p></p></li><li><p><strong>design</strong>: A list of markdown files associated with the test that explain the systems, objects, and design documents. The file paths do not need to be complete, but must be unique.</p><p></p></li><li><p><strong>issues</strong>: A list of <a href="https://github.com/idaholab/moose/issues/">github issues</a> that are associated with the test and items being tested.</p></li></ol><p>For more information regarding writing the requirement test see <a href="../sqa/what_is_a_requirement.html">What is a Requirement?</a>.</p><p>These items are provided in the associated &quot;tests&quot; file. For example,</p><pre class="moose-pre"><code class="language-text">
[Tests]
  [my_test]
    type = &#x27;CSVDiff&#x27;
    input = &#x27;my_test.i&#x27;
    csvdiff = &#x27;my_test.csv&#x27;

    requirement = &quot;MyObject shall do some kind of thing. Maybe this description has &quot;
                  &quot;multiple lines.&quot;
    design = &#x27;MyObject.md some_relevant_file.md&#x27;
    issues = &#x27;#1234 #1235 #1236&#x27;
  []
[]
</code></pre><p>It is also possible to provide a common value for &#x27;design&#x27; and &#x27;issues&#x27; at the top level of a test specification as shown below. If &#x27;design&#x27; or &#x27;issues&#x27; appear again within a block the top level values are overridden.</p><pre class="moose-pre"><code class="language-text">
[Tests]
  design = &#x27;MyObject.md&#x27;
  issues = &#x27;#12345&#x27;
  [one]
    type = CSVDiff
    input = one.i
    csvdiff = one_out.csv
    requirement = &quot;The system shall must compute a value.&quot;
  []
  [two]
    type = RunException
    input = two.i
    expect_err = &quot;You can not do that&quot;
    requirement = &quot;The system shall produce an error when the &#x27;foo&#x27; parameter is wrong.&quot;
    issues = &quot;#54321&quot;
  []
[]
</code></pre><p>Multiple tests may be associated with a single requirement that is tested in multiple ways, such as in 1D, 2D, and 3D. For this case, the tests within a specification may be grouped into a single requirement with each test within the group providing additional details via the &quot;detail&quot; parameter. It is important that the requirement text and each of the details are a complete sentence when combined, as shown in the following example.</p><pre class="moose-pre"><code class="language-text">
[Tests]
  [group] # this is an arbitrary name that is not used
    issues = &quot;#1235&quot;
    design = &quot;MyObject.md&quot;
    requirement = &quot;The system shall solve the Laplace equation in:&quot;
    [1D]
      type = Exodiff
      input = input_1D.i
      exodiff = input_1D_out.e

      detail = &quot;in 1D,&quot;
    []
    [2D]
      type = Exodiff
      input = input_2D.i
      exodiff = input_2D_out.e

      detail = &quot;in 2D, and&quot;
    []
    [3D]
      type = Exodiff
      input = input_3D.i
      exodiff = input_3D_out.e

      detail = &quot;in 3D.&quot;
    []
  []
[]
</code></pre></section></section><div class="moose-modal modal" id="940904cd-e777-4ff2-9f2b-3721cd337f21"><div class="modal-content"><h4>(../moose/framework/src/markers/BoxMarker.C)</h4><pre class="moose-pre"><code class="language-cpp">// This file is part of the MOOSE framework
// https://www.mooseframework.org
//
// All rights reserved, see COPYRIGHT for full restrictions
// https://github.com/idaholab/moose/blob/master/COPYRIGHT
//
// Licensed under LGPL 2.1, please see LICENSE for details
// https://www.gnu.org/licenses/lgpl-2.1.html

#include &quot;BoxMarker.h&quot;
#include &quot;MooseUtils.h&quot;

registerMooseObject(&quot;MooseApp&quot;, BoxMarker);

InputParameters
BoxMarker::validParams()
{
  InputParameters params = Marker::validParams();
  params.addRequiredParam&lt;RealVectorValue&gt;(
      &quot;bottom_left&quot;, &quot;The bottom left point (in x,y,z with spaces in-between).&quot;);
  params.addRequiredParam&lt;RealVectorValue&gt;(
      &quot;top_right&quot;, &quot;The bottom left point (in x,y,z with spaces in-between).&quot;);

  MooseEnum marker_states = Marker::markerStates();

  params.addRequiredParam&lt;MooseEnum&gt;(
      &quot;inside&quot;, marker_states, &quot;How to mark elements inside the box.&quot;);
  params.addRequiredParam&lt;MooseEnum&gt;(
      &quot;outside&quot;, marker_states, &quot;How to mark elements outside the box.&quot;);

  params.addClassDescription(
      &quot;Marks the region inside and outside of a &#x27;box&#x27; domain for refinement or coarsening.&quot;);
  return params;
}

BoxMarker::BoxMarker(const InputParameters &amp; parameters)
  : Marker(parameters),
    _inside(parameters.get&lt;MooseEnum&gt;(&quot;inside&quot;).getEnum&lt;MarkerValue&gt;()),
    _outside(parameters.get&lt;MooseEnum&gt;(&quot;outside&quot;).getEnum&lt;MarkerValue&gt;()),
    _bounding_box(MooseUtils::buildBoundingBox(parameters.get&lt;RealVectorValue&gt;(&quot;bottom_left&quot;),
                                               parameters.get&lt;RealVectorValue&gt;(&quot;top_right&quot;)))
{
}

Marker::MarkerValue
BoxMarker::computeElementMarker()
{
  RealVectorValue centroid = _current_elem-&gt;vertex_average();

  if (_bounding_box.contains_point(centroid))
    return _inside;

  return _outside;
}
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="a827c9e7-f544-4299-97c0-53468ba6a734"><div class="modal-content"><h4>(../moose/framework/src/kernels/Diffusion.C)</h4><pre class="moose-pre"><code class="language-cpp">// This file is part of the MOOSE framework
// https://www.mooseframework.org
//
// All rights reserved, see COPYRIGHT for full restrictions
// https://github.com/idaholab/moose/blob/master/COPYRIGHT
//
// Licensed under LGPL 2.1, please see LICENSE for details
// https://www.gnu.org/licenses/lgpl-2.1.html

#include &quot;Diffusion.h&quot;

registerMooseObject(&quot;MooseApp&quot;, Diffusion);

InputParameters
Diffusion::validParams()
{
  InputParameters params = Kernel::validParams();
  params.addClassDescription(&quot;The Laplacian operator ($-\\nabla \\cdot \\nabla u$), with the weak &quot;
                             &quot;form of $(\\nabla \\phi_i, \\nabla u_h)$.&quot;);
  return params;
}

Diffusion::Diffusion(const InputParameters &amp; parameters) : Kernel(parameters) {}

Real
Diffusion::computeQpResidual()
{
  return _grad_u[_qp] * _grad_test[_i][_qp];
}

Real
Diffusion::computeQpJacobian()
{
  return _grad_phi[_j][_qp] * _grad_test[_i][_qp];
}
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></div></div></div></main></div></body><script type="text/javascript" src="../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../js/init.js"></script><script type="text/javascript" src="../js/navigation.js"></script><script type="text/javascript" src="https://cse.google.com/cse.js?cx=008852834041008754713:g3ilnhhbbj9"></script><script type="text/javascript" src="../js/sqa_moose.js"></script>